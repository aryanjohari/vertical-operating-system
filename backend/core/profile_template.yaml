# backend/core/profile_template.yaml
# =========================================================
# APEX UNIVERSAL DNA v3.0 (Titanium Kernel Ready)
# =========================================================

# --- LAYER 1: IDENTITY (The Basics) ---
# Used by every agent to know who they work for.
identity:
  project_id: "REQUIRED"          # e.g., 'apex-bail-manukau'
  business_name: "REQUIRED"       # e.g., 'Manukau Urgent Bail'
  niche: "REQUIRED"               # e.g., 'Criminal Defense'
  website: ""                     # e.g., 'https://bail.apex.co.nz'
  schema_type: "LocalBusiness"   # Options: LocalBusiness, Plumber, LegalService, Locksmith, etc.
  contact:
    phone: ""                     # Public Office Number (for website display)
    email: ""
    address: "Auckland, New Zealand"

# --- LAYER 2: THE BRAIN (Tone & Expertise) ---
# The "Wisdom" that prevents AI trash.
brand_brain:
  voice_tone: "Professional, Urgent, Authoritative" # e.g. "Friendly, Local" for Plumbers
  key_differentiators: []         # e.g., "24/7 Availability", "Former Police Prosecutor"
  insider_tips: []                # e.g., "Never speak to police without a lawyer"
  common_objections: []           # e.g., "Why do I need a lawyer for a first offense?"
  forbidden_topics: ["Guaranteed outcomes", "Illegal advice", "DIY legal work"]

# --- LAYER 3: SERVICE MATRIX (What we sell) ---
# CRITICAL: This drives the pSEO Writer. It replaces hardcoded lists.
# Add as many services as the client offers.
# Primary Keywords = "Money Terms" for H1/Title
# Context Keywords = "Semantic Safety Terms" for Body/H2
services:
  - name: "Emergency Bail Support"
    slug: "bail"
    primary_keywords: ["bail lawyer", "urgent bail application"]
    context_keywords: ["weekend court lawyer", "emergency legal help", "bail bonds", "court appearance"]
    
  - name: "Parole Hearings"
    slug: "parole"
    primary_keywords: ["parole board representation", "early release lawyer"]
    context_keywords: ["parole hearing preparation", "parole conditions", "parole violation defense"]
    
  - name: "Limited Licenses"
    slug: "work-license"
    primary_keywords: ["work licence disqualified driver", "section 94 application"]
    context_keywords: ["work license application", "disqualified driver help", "restricted license"]

# --- LAYER 4: THE MODULES (The Engines) ---
# Only enabled sections are active. 

modules:
  
  # ENGINE A: pSEO (Passive Traffic)
  # ENABLE IF: Client wants to rank on Google Maps/Search
  local_seo:
    enabled: true
    scout_settings:
      anchor_entities: ["Court", "Police Station", "Prison"] # Places relevance
      geo_scope:
        cities: ["Auckland"]
        suburbs: ["Manukau", "Henderson", "Papakura", "North Shore"]
    publisher_settings:
      cms: "wordpress"
      url: ""      # Client's WP URL
      username: "" # Client's WP Username (Password is in Encrypted DB)
    seo_rules:
      force_schema_injection: true
      force_meta_description: true
      structure:
        title_format: "{Keyword} {City} | {Business_Name}"

  # ENGINE B: LEAD GEN (Active Hunting & Speed Bridge)
  # ENABLE IF: Client wants Active Revenue Hunting
  lead_gen:
    enabled: true
    
    # 1. THE SNIPER (TradeMe/FB Scraper)
    # USE FOR: Plumbers, Glaziers, Movers. (DISABLE FOR: Lawyers/Doctors)
    sniper:
      enabled: false
      platforms: ["trademe_jobs", "facebook_groups", "neighborly"]
      keywords: ["urgent plumber", "leaking", "broken window", "need help"]
      # CRITICAL: Filters out irrelevant leads from other cities
      geo_filter: ["Auckland", "Manukau", "Waitakere", "North Shore"] 

    # 2. THE REACTIVATOR (Old Client Miner)
    # USE FOR: Service trades with repeat customers.
    reactivation:
      enabled: false
      offer_text: "Hi [Name], this is [Business Name]. We are doing winter checks in your area. Reply YES for a free slot."
      
    # 3. THE SALES BRIDGE (The 24/7 Batphone)
    # USE FOR: EVERYONE.
    sales_bridge:
      enabled: true
      # CRITICAL: The Boss's PRIVATE Mobile (Where the call actually goes)
      destination_phone: "+6421000000" 
      sms_alert_template: "ðŸ”¥ HOT LEAD: [Source] - [Name]. Click to dial: [Link]"
      # What the AI says to the BOSS when they pick up:
      whisper_text: "Apex Alert. New high-value lead on the line. Press 1 to connect."

  # ENGINE C: INTEGRATIONS (Connecting Existing Ads)
  # ENABLE IF: Client already runs Google Ads or has a Contact Form
  integrations:
    enabled: true
    
    # 1. AD NETWORKS (The Ad Booster)
    google_ads:
      webhook_enabled: true
      # Apex will listen for POSTs from Google Ads -> Trigger Sales Bridge
      
    # 2. EXISTING FORMS (Gravity Forms / Contact Form 7)
    wordpress_forms:
      webhook_enabled: true
      # Apex will listen for POSTs from their WP Site -> Trigger Sales Bridge
      
    # 3. CRM SYNC (Nango)
    hubspot:
      enabled: false
      sync_leads: true

  # 4. NURTURING (The Safety Net)
    nurturing:
      enabled: true
      missed_call_sms: "Hi, this is [Business]. Sorry I missed your call, I'm currently on site. I have received your enquiry and will call you back within 20 minutes."

  # ENGINE D: ADMIN (The Business in a Box)
  # ENABLE IF: You manage their back-office
  admin:
    enabled: false
    invoicing:
      rate_per_lead: 50.00 # Currency: NZD
      auto_bill: true
    compliance:
      required_docs: ["Law Society Cert", "Indemnity Insurance"]

# --- LAYER 5: SYSTEM ---
# Do not edit unless you are the Kernel Admin.
# system:
#   version: "3.0"
#   model_overrides:
#     writer: "gemini-1.5-pro"
#     sniper: "gemini-2.5-flash"
#     utility: "gemini-2.5-flash-lite"